# EPLab

Программное обеспечение для работы с устройствами линейки EyePoint, предназначенными для поиска неисправностей на печатных платах в ручном режиме (при помощи ручных щупов).

## Возможности

- Непрерывное измерение ВАХ с возможностью быстрой перестройки параметров измерителя.
- Сравнение ВАХ в реальном времени с двух каналов.
- Создание плана тестирования – файла с набором эталонных ВАХ, снятых для различных точек с заданными параметрами.
- Тестирование с использованием ранее созданного плана тестирования (с автоматической установкой параметров измерителя).
- Сохранение ВАХ в виде изображений.
- Генерация HTML отчетов с результатами тестирования.
- Возможность связать расширение **uzf** с EPLab (подробнее об этом можно прочитать в разделе **"Дополнительно"**).

## Поддерживаемые ОС: 

- Windows 7 SP1 и новее.
- Linux (протестировано на Ubuntu 18.04, 20.04; Astra Linux - 4.15.3).

## Запуск в Windows

1. Установите [MSVC 2013 redistributable](https://www.microsoft.com/en-us/download/details.aspx?id=40784) и [MSVC 2015 redistributable](https://www.microsoft.com/ru-ru/download/details.aspx?id=48145).

   - Если у вас EPLab разрядности 32-bit, то вам нужно установить MSVC 2013 x86 и MSVC 2015 x86.
   - Если у вас EPLab разрядности 64-bit, то вам нужно установить MSVC 2013 x64 и MSVC 2015 x64.

2. Установите драйвер **ivm.inf** из папки **drivers\ivm**.

3. Если вы планируете использовать мультиплексор, установите драйвер **epmux.inf** из папки **drivers\epmux**.

4. Дважды кликните по **eplab.exe**. Также можно перейти в терминале в папку, в которой расположен исполняемый файл, и выполнить команду:

   ```batch
   eplab.exe
   ```

## Подключение устройств в Windows

По умолчанию при запуске к ПО не подключено ни одно устройство. Чтобы подключить к ПО устройство, перейдите:

```batch
File -> Connection
```

В появившемся диалоговом окне **Connection setup** выберите необходимое устройство и нажмите кнопку **Connect**.

Чтобы запустить приложение с уже подключенными к нему устройствами, в командной строке выполните команду:

```batch
eplab.exe --test <ivm_url> [--ref <ivm_url>]
```

ПО может работать как с одним, так и с двумя измерителями (второй измеритель задавать не обязательно). **ivm_url** - это адрес COM-порта. Также **ivm_url** может быть **virtual** (будет использоваться виртуальный измеритель). Пример запуска:

```batch
eplab.exe --test com:\\.\COM13 --ref virtual
```

## Запуск в Linux

1. Перед первым запуском обычно нужно прописать в системе VID и PID устройства для драйвера виртуального COM-порта:

   ```bash
   sudo sh -c 'echo 1CBC 0007 > /sys/bus/usb/drivers/cdc_acm/new_id'
   ```

2. Установите **curl**:

   ```bash
   sudo apt-get update
   sudo apt-get install curl
   ```

3. Для корректной работы ПО с COM-портами пользователь должен находиться в группе **dialout**. Чтобы добавить пользователя в эту группу, выполните команду (здесь предполагается, что имя пользователя **username**):

   ```bash
   sudo adduser username dialout
   ```

   После добавления пользователя в группу **dialout** перезагрузите компьютер.

4. Дважды кликните по иконке файла **eplab**. Также можно перейти в терминале в папку, в которой расположен исполняемый файл, и выполнить команду:

   ```bash
   ./eplab
   ```

   Если возникнет ошибка с правом доступа, предоставьте права на выполнение. Для этого в терминале выполните команду:

   ```bash
   chmod ugo+x eplab
   ```

5. Если при открытии устройств все же возникают какие-то проблемы, попробуйте запустить ПО с правами root:

   ```bash
   sudo ./eplab
   ```

## Подключение устройств в Linux

По умолчанию при запуске к ПО не подключено ни одно устройство. Чтобы подключить к ПО устройство, перейдите:

```bash
File -> Connection
```

В появившемся диалоговом окне **Connection setup** выберите необходимое устройство и нажмите кнопку **Connect**.

Чтобы запустить приложение с уже подключенными к нему устройствами, в командной строке выполните команду:

```bash
./eplab --test <ivm_url> [--ref <ivm_url>]
```
ПО может работать как с одним, так и с двумя измерителями (второй измеритель задавать не обязательно). **ivm_url** - это адрес COM-порта. Также **ivm_url** может быть **virtual** (будет использоваться виртуальный измеритель). Пример запуска:

```bash
./eplab --test com:///dev/ttyACM0 --ref virtual
```

## Дополнительно

- Для работы с сетевым устройством АСА нужно запустить сервер версии 4.3.2.

- Для корректной работы приложения необходимо отключить брандмауэр (firewall) на компьютере.

- Для корректной работы приложения на виртуальной машине нужно настроить сеть виртуальной машины. Для этого выберите виртуальную машину:

  ```bash
  Настроить -> Сеть -> Адаптер 1 -> Включить сетевой адаптер -> Тип подключения -> Сетевой мост
  ```

  Аналогично нужно настроить адаптер 2:
  
  ```bash
  Настроить -> Сеть -> Адаптер 2 -> Включить сетевой адаптер -> Тип подключения -> NAT
  ```
  
- В Windows файлы с расширением **uzf** можно связать с EPLab. Для этого нужно:

  - кликнуть правой кнопкой мыши по **uzf** файлу;
  - выбрать пункт меню "Открыть с помощью";
  - выбрать EPLab и поставить галочку "Всегда использовать это приложение для открытия .uzf файлов".

